<!--START_SECTION:medium-->
[Baca di Medium](https://medium.com/@dikaelsaputra/implementasi-nosql-database-mongodb-dengan-pymongo-689ae79ac6c6?source=rss-272e0aace4a6------2)

<h3>Implementasi NoSQL Database — MongoDB dengan PyMongo</h3><figure><img alt="" src="https://cdn-images-1.medium.com/max/827/1*DsJ5H9CpzW_OcTXfwUS2IQ.png" /></figure><p>MongoDB adalah database NoSQL yang terkenal karena fleksibilitasnya dalam menangani data berbasis dokumen. Dalam blog ini, kita akan mempelajari cara menghubungkan aplikasi ke MongoDB Atlas, platform cloud MongoDB yang memungkinkan pengguna mengelola database tanpa memerlukan infrastruktur server sendiri. Selain itu, kita juga akan melakukan operasi dasar CRUD, menggunakan aggregation untuk query data yang lebih kompleks, dan mengerjakan latihan tambahan untuk memperdalam pemahaman tentang MongoDB.</p><p>MongoDB menyimpan data dalam format dokumen seperti JSON, yang disebut BSON (Binary JSON). Ini membuat MongoDB menjadi pilihan populer untuk aplikasi yang memerlukan fleksibilitas skema data. MongoDB Atlas adalah layanan cloud yang memudahkan pengelolaan MongoDB tanpa perlu mengurus server fisik. Atlas menyediakan keamanan, skalabilitas, dan pemeliharaan yang praktis untuk aplikasi modern.</p><h3>1. Menghubungkan ke Database MongoDB Atlas</h3><p>Untuk menghubungkan aplikasi ke MongoDB Atlas, ikuti langkah-langkah berikut atau baca <a href="https://medium.com/@dikaelsaputra/tutorial-lengkap-mongodb-atlas-dengan-mongodb-compass-d3b015cf4712">medium ini</a>:</p><p><strong>Buat Cluster di MongoDB Atlas:</strong></p><ul><li>Masuk ke <a href="https://www.mongodb.com/cloud/atlas">MongoDB Atlas</a>.</li><li>Buat akun (atau masuk jika sudah memiliki akun) dan buat cluster baru.</li></ul><figure><img alt="" src="https://cdn-images-1.medium.com/max/630/0*hYye5VEq5iAi6nHp.png" /></figure><ul><li>Pilih konfigurasi cluster, pilih wilayah data center yang diinginkan, dan buat cluster.</li></ul><figure><img alt="" src="https://cdn-images-1.medium.com/max/827/1*m3EPno4MGu1PPoRPwvk83w.png" /></figure><figure><img alt="" src="https://cdn-images-1.medium.com/max/827/1*buo0yI-9uve6PrEK2_2G_Q.png" /></figure><figure><img alt="" src="https://cdn-images-1.medium.com/max/827/1*ObYs_9TCFY15dEHWgTZx2Q.png" /></figure><figure><img alt="" src="https://cdn-images-1.medium.com/max/827/1*o-xI6WGU-2UQ3Mr3slP_7A.png" /></figure><p><strong>Buat Database User dan Atur Network Access:</strong></p><ul><li>Setelah cluster siap, tambahkan user database dengan username dan password untuk akses ke database. Tutorial lengkapnya ada <a href="https://medium.com/@dikaelsaputra/tutorial-lengkap-mongodb-atlas-dengan-mongodb-compass-d3b015cf4712">di sini</a>.</li></ul><figure><img alt="" src="https://cdn-images-1.medium.com/max/827/1*OU2hJ5KvRQCzPB4kDVPUQQ.png" /></figure><ul><li>Izinkan akses jaringan dengan menambahkan IP Anda atau mengatur akses dari semua IP (0.0.0.0/0) untuk kemudahan (namun, lebih baik batasi hanya untuk IP yang dibutuhkan).</li></ul><p><strong>Dapatkan URL Koneksi:</strong></p><ul><li>Dari dashboard Atlas, salin URL koneksi untuk Python (dalam format mongodb+srv://<username>:<password>@cluster.mongodb.net/<database>).</li></ul><p><strong>Hubungkan ke MongoDB Atlas Menggunakan Python:</strong></p><ul><li>Gunakan pymongo untuk menginisialisasi klien MongoDB dengan URL yang telah didapatkan.</li></ul><p>Untuk menggunakan MongoDB dengan Python, kita memerlukan pymongo, yang menyediakan API untuk menghubungkan dan berinteraksi dengan MongoDB.</p><p>Berikut adalah langkah-langkah untuk menginstal pustaka ini:</p><ul><li><strong>Instalasi </strong><strong>pymongo</strong>:</li><li>Buka terminal atau command prompt, lalu jalankan perintah berikut:</li></ul><pre>pip install --upgrade pymongo</pre><ul><li><strong>Verifikasi Instalasi</strong>:</li><li>Setelah selesai, Anda bisa memverifikasi instalasinya dengan menjalankan perintah Python berikut:</li></ul><pre>import pymongo<br />print("pymongo version:", pymongo.__version__)</pre><p>Jika berhasil, ini berarti pymongo telah diinstal dengan benar dan siap digunakan untuk menghubungkan aplikasi Anda ke MongoDB.</p><p>Contoh kode berikut menunjukkan cara menginisialisasi klien MongoDB Atlas dan menghubungkannya ke database company_db:</p><pre>from pymongo import MongoClient  <br /><br /># Ganti <username>, <password>, dan <cluster-url> dengan informasi koneksi Atlas Anda <br />client = MongoClient('mongodb+srv://<username>:<password>@<cluster-url>/company_db?retryWrites=true&w=majority') <br />db = client['company_db'] <br />collection = db['employees']  <br /><br /># Contoh untuk memastikan koneksi<br />print('Connected to MongoDB')</pre><p>Kode di atas memastikan bahwa aplikasi telah terhubung ke database company_db di MongoDB Atlas.</p><h3>2. Operasi CRUD Dasar</h3><p>Setelah berhasil menghubungkan ke database, kita dapat melakukan operasi dasar CRUD pada koleksi employees.</p><h4>Tugas 2: Insert, Update, dan Delete Data pada Koleksi employees</h4><ul><li><strong>Insert Data:</strong> Tambahkan data karyawan baru ke dalam koleksi employees.</li></ul><pre># Contoh Insert Data<br />employee_data = {     <br />  'name': 'Alice',     <br />  'department': 'Finance',     <br />  'age': 29,     <br />  'salary': 4500 <br />} <br />collection.insert_one(employee_data) <br />print('Data inserted')</pre><figure><img alt="" src="https://cdn-images-1.medium.com/max/827/1*GcWQqoX1SdK5u2dmg90O4g.png" /></figure><ul><li><strong>Update Data:</strong> Perbarui data karyawan berdasarkan kriteria tertentu.</li></ul><pre>collection.update_one(     <br />  {'name': 'Alice'},     <br />  {'$set': {'salary': 5000}} <br />) <br />print('Data updated')</pre><figure><img alt="" src="https://cdn-images-1.medium.com/max/827/1*pWMK_mA84bE0rCXHUdEJsQ.png" /></figure><ul><li><strong>Delete Data:</strong> Hapus data karyawan tertentu dari koleksi.</li></ul><pre>collection.delete_one(<br />  {'name': 'Alice'}<br />) <br />print('Data deleted')</pre><ul><li><strong>Read Data:</strong> Query untuk membaca semua data karyawan.</li></ul><pre># Contoh Query Data<br />for employee in collection.find():     <br />  print(employee)</pre><h3>3. Query Lebih Kompleks Menggunakan Aggregation</h3><p>Aggregation di MongoDB memungkinkan kita untuk mengelompokkan dan menganalisis data. Berikut contoh query untuk menghitung rata-rata gaji di setiap departemen.</p><h4>Tugas 3: Menggunakan Aggregation untuk Menghitung Rata-rata Gaji per Departemen</h4><p>Sebelum melanjutkan tugas ke-3 maka tambahkan karyawan terlebih dahulu:</p><pre># Tambahkan beberapa data karyawan tambahan<br />employees = [<br />    {'name': 'Bob', 'department': 'Marketing', 'age': 32, 'salary': 5000},<br />    {'name': 'Charlie', 'department': 'Engineering', 'age': 28, 'salary': 5500},<br />    {'name': 'David', 'department': 'Finance', 'age': 35, 'salary': 6000},<br />    {'name': 'Eve', 'department': 'Engineering', 'age': 30, 'salary': 5200},<br />    {'name': 'Fay', 'department': 'Human Resources', 'age': 40, 'salary': 4800},<br />    {'name': 'Grace', 'department': 'Marketing', 'age': 26, 'salary': 4500},<br />    {'name': 'Heidi', 'department': 'Engineering', 'age': 25, 'salary': 4900},<br />    {'name': 'Ivan', 'department': 'Human Resources', 'age': 29, 'salary': 4600},<br />    {'name': 'Judy', 'department': 'Finance', 'age': 31, 'salary': 4700}<br />]<br /><br />collection.insert_many(employees)<br />print('Additional employees inserted')</pre><pre># Query Aggregation untuk mencari rata-rata gaji per departemen<br />pipeline = [<br />  {'$group': {'_id': '$department', 'average_salary': {'$avg': '$salary'}}}<br />]<br />for result in collection.aggregate(pipeline):<br />  print(result)</pre><p><strong>Output:</strong></p><pre>{'_id': 'Human Resources', 'average_salary': 4700.0}<br />{'_id': 'Engineering', 'average_salary': 5200.0}<br />{'_id': 'Finance', 'average_salary': 5350.0}<br />{'_id': 'Marketing', 'average_salary': 4750.0}</pre><h3>4. Latihan Tambahan</h3><p>Berikut beberapa latihan untuk mengembangkan kemampuan Anda dalam menggunakan MongoDB.</p><ul><li><strong>Latihan 4.1:</strong> Buat koleksi products dan tambahkan setidaknya 10 produk dengan informasi harga dan kategori.</li></ul><pre>product_collection = db['products'] <br />products = [<br />  {'name': 'Laptop', 'category': 'Electronics', 'price': 700},<br />  {'name': 'Smartphone', 'category': 'Electronics', 'price': 500},<br />  {'name': 'Headphones', 'category': 'Electronics', 'price': 150},<br />  {'name': 'Desk Chair', 'category': 'Furniture', 'price': 200},<br />  {'name': 'Table Lamp', 'category': 'Furniture', 'price': 50},<br />  {'name': 'Notebook', 'category': 'Stationery', 'price': 5},<br />  {'name': 'Pen Set', 'category': 'Stationery', 'price': 10},<br />  {'name': 'Backpack', 'category': 'Accessories', 'price': 30},<br />  {'name': 'Water Bottle', 'category': 'Accessories', 'price': 15},<br />  {'name': 'Electric Kettle', 'category': 'Home Appliances', 'price': 40},<br />]<br /><br />product_collection.insert_many(products)<br />print('Products inserted')</pre><ul><li><strong>Latihan 4.2:</strong> Temukan produk dengan harga di atas rata-rata.</li></ul><pre>avg_price = list(product_collection.aggregate([{'$group': {'_id': None, 'avg_price': {'$avg': '$price'}}}]))[0]['avg_price'] <br />for product in product_collection.find({'price': {'$gt': avg_price}}):     <br />  print(product)</pre><p><strong>Output:</strong></p><pre>{'_id': ObjectId('672a07180b57cc201d536bbf'), 'name': 'Laptop', 'category': 'Electronics', 'price': 700}<br />{'_id': ObjectId('672a07180b57cc201d536bc0'), 'name': 'Smartphone', 'category': 'Electronics', 'price': 500}<br />{'_id': ObjectId('672a07180b57cc201d536bc2'), 'name': 'Desk Chair', 'category': 'Furniture', 'price': 200}</pre><ul><li><strong>Latihan 4.3:</strong> Hitung total produk di setiap kategori menggunakan aggregation.</li></ul><pre>pipeline = [     <br />  {'$group': {'_id': '$category', 'total_products': {'$sum': 1}}} <br />] <br />for result in product_collection.aggregate(pipeline):     <br />  print(result)</pre><p><strong>Output:</strong></p><pre>{'_id': 'Furniture', 'total_products': 2}<br />{'_id': 'Home Appliances', 'total_products': 1}<br />{'_id': 'Accessories', 'total_products': 2}<br />{'_id': 'Stationery', 'total_products': 2}<br />{'_id': 'Electronics', 'total_products': 3}</pre><h3>5. Tugas Tambahan</h3><ul><li><strong>Tugas 1:</strong> Cari 5 karyawan dengan gaji tertinggi di setiap departemen.</li></ul><pre>pipeline = [     <br />  {'$sort': {'salary': -1}},     <br />  {'$group': {'_id': '$department', 'top_employees': {'$push': '$$ROOT'}}},     <br />  {'$project': {'top_employees': {'$slice': ['$top_employees', 5]}}} <br />] <br />for result in collection.aggregate(pipeline):     <br />  print(result)</pre><p><strong>Output:</strong></p><pre>{'_id': 'Finance', 'top_employees': [{'_id': ObjectId('6729743563255aaccd830b23'), 'name': 'David', 'department': 'Finance', 'age': 35, 'salary': 6000}, {'_id': ObjectId('6729743563255aaccd830b29'), 'name': 'Judy', 'department': 'Finance', 'age': 31, 'salary': 4700}]}<br />{'_id': 'Engineering', 'top_employees': [{'_id': ObjectId('6729743563255aaccd830b22'), 'name': 'Charlie', 'department': 'Engineering', 'age': 28, 'salary': 5500}, {'_id': ObjectId('6729743563255aaccd830b24'), 'name': 'Eve', 'department': 'Engineering', 'age': 30, 'salary': 5200}, {'_id': ObjectId('6729743563255aaccd830b27'), 'name': 'Heidi', 'department': 'Engineering', 'age': 25, 'salary': 4900}]}<br />{'_id': 'Marketing', 'top_employees': [{'_id': ObjectId('6729743563255aaccd830b21'), 'name': 'Bob', 'department': 'Marketing', 'age': 32, 'salary': 5000}, {'_id': ObjectId('6729743563255aaccd830b26'), 'name': 'Grace', 'department': 'Marketing', 'age': 26, 'salary': 4500}]}<br />{'_id': 'Human Resources', 'top_employees': [{'_id': ObjectId('6729743563255aaccd830b25'), 'name': 'Fay', 'department': 'Human Resources', 'age': 40, 'salary': 4800}, {'_id': ObjectId('6729743563255aaccd830b28'), 'name': 'Ivan', 'department': 'Human Resources', 'age': 29, 'salary': 4600}]}</pre><ul><li><strong>Tugas 2:</strong> Hapus karyawan di bawah usia 25 tahun.</li></ul><pre>collection.delete_many({'age': {'$lt': 25}})</pre><p><strong>Output:</strong></p><pre>DeleteResult({'n': 0, 'electionId': ObjectId('7fffffff00000000000000e4'), 'opTime': {'ts': Timestamp(1730807792, 20), 't': 228}, 'ok': 1.0, '$clusterTime': {'clusterTime': Timestamp(1730807792, 20), 'signature': {'hash': b'\xf1\x11\x97(\xf4\xffP|D\x04\x13\x0b\xaf\x02G\xad\xae\xf7(\xe3', 'keyId': 7374051800296456194}}, 'operationTime': Timestamp(1730807792, 20)}, acknowledged=True)</pre><ul><li><strong>Tugas 3:</strong> Buat laporan yang menghitung total gaji dan rata-rata umur per departemen.</li></ul><pre>pipeline = [<br />  {'$group': {<br />     '_id': '$department',<br />      'total_salary': {'$sum': '$salary'},<br />      'average_age': {'$avg': '$age'}<br />  }}<br />]<br />for result in collection.aggregate(pipeline):<br />  print(result)</pre><p><strong>Output:</strong></p><pre>{'_id': 'Finance', 'total_salary': 10700, 'average_age': 33.0}<br />{'_id': 'Engineering', 'total_salary': 15600, 'average_age': 27.666666666666668}<br />{'_id': 'Marketing', 'total_salary': 9500, 'average_age': 29.0}<br />{'_id': 'Human Resources', 'total_salary': 9400, 'average_age': 34.5}</pre><h3>Kesimpulan</h3><p>MongoDB adalah database yang sangat fleksibel, cocok untuk aplikasi modern yang memerlukan skema data yang dinamis. Dengan MongoDB Atlas, pengelolaan database menjadi lebih mudah dan aman tanpa perlu memikirkan infrastruktur server. Dalam blog ini, kita telah mempelajari cara menghubungkan ke MongoDB Atlas, melakukan operasi dasar CRUD, dan query yang lebih kompleks menggunakan aggregation. Latihan-latihan di atas juga membantu dalam mengembangkan pemahaman tentang cara mengelola data dalam MongoDB.</p><h3>Referensi</h3><p><a href="https://drive.google.com/file/d/13snp4VeN3fv_g5qyzMvzeCamYPAYlQVl/view?usp=sharing">Hands_On_Pertemuan_10.ipynb</a></p><img alt="" height="1" src="https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=689ae79ac6c6" width="1" />
<!--END_SECTION:medium-->